import { shoes } from '../data/shoes';

// Clean and simplify text for matching
const normalise = (text) => text.toLowerCase().replace(/[^a-z0-9\s]/gi, '');

export function matchShoesFromReply(reply) {
  const cleanedReply = normalise(reply);

  const matched = shoes.filter((shoe) => {
    const nameMatch = cleanedReply.includes(normalise(shoe.name));
    const brandMatch = cleanedReply.includes(normalise(shoe.brand));
    return nameMatch || (brandMatch && cleanedReply.includes(normalise(`${shoe.brand} ${shoe.name}`)));
  });

  return matched;
}
